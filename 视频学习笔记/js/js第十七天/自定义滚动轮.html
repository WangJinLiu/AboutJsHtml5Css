<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>自定义滚轮</title>
	<style>


		#wrap{
			width: 200px;
			height: 300px;
			border: 5px solid;
			position: relative;
			overflow: hidden;

		}
		/*伪元素*/
		#wrap::after{
			content: '';
			/*必须写content，是inline，就相当于在wrap里加入了最后一个位置子标签*/
			display: block;
			clear: both;
		}
		#content{
			width: 170px;
			float: left;
			position: absolute;
			left: 0;
			top: 0;
		}
		#line{
			width: 30px;
			height: 100%;
			float: right;
			background: grey;
			position: relative;
		}
		#move{
			width: 100%;
			border-radius: 20px;
			height: 40px;
			background: black;
			position: absolute;
			left: 0;
			top:0;
		}
	</style>
</head>
<body>
	 <div id="wrap">
	 	<div id="content">小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境小说：以刻画人物形象为中心，通过完整的故事情节和环境描写来反映社会生活的文学体裁。人物、情节、环境是小说的三要素。情节一般包括开端、发展、高潮、结局四部分，有的包括序幕、尾声。环境包括自然环境和社会环境</div>
	 	<div id="line">
	 		<div id="move"></div>
	 	</div>


	 </div>
	 <script type="text/javascript">
	 	var move=document.getElementById('move');
	 	var content=document.getElementById('content');
	 	var line=document.getElementById('line');
	 	var wrap=document.getElementById('wrap');
	 	//计算比例
	 	function scale(){
	 		
	 		var cHeight=content.offsetHeight-wrap.offsetHeight;
	 		var lHeight=line.offsetHeight-move.offsetHeight;
	 		var s=cHeight/lHeight;
	 		//比例
	 		return s;

	 	}
	 	move.onmousedown=function(ev){
	 		var e=ev||window.event;
	 		
	 		var y=move.offsetTop;
	 		var by=e.clientY;
	 		var contentTop=content.offsetTop;

	 		document.onmousemove=function(ev1){
	 			var e=ev1||window.event;
	 			//偏移量就是e.clientY-by
	 	

	 			move.style.top=e.clientY+y-by+'px';
	 			if(move.offsetTop<0){
	 				move.style.top=0+'px';

	 			}
	 			if(move.offsetTop>=line.offsetHeight-move.offsetHeight){
	 				move.style.top=line.offsetHeight-move.offsetHeight+'px';

	 			}
	 			var s=scale();
	 			var value=s*move.offsetTop;
	 			content.style.top=-value+'px';
			}
	 		document.onmouseup=function(){
	 			document.onmousemove=null;
	 		}
	 	}
	 	var n=4;
	 	window.onkeydown=function(a){
	 		var a=a||window.event;
	 		var bili=scale();
	 		if(move.offsetTop<0){
	 				move.style.top=0+'px';

	 			}
 			if(move.offsetTop>=line.offsetHeight-move.offsetHeight){
 				move.style.top=line.offsetHeight-move.offsetHeight+'px';

 			}
	 		if(a.keyCode==40){
	 			
	 			move.style.top=move.offsetTop+n+'px';
				content.style.top=-bili*move.offsetTop+'px';
	 		}	


	 		if(a.keyCode==38){
	 			move.style.top=move.offsetTop-n+'px';
				content.style.top=-bili*move.offsetTop+'px';
			}

	 	}



	 </script>
	
</body>
</html>