<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>04.瀑布流基础版01</title>
	<style>
		*{margin:0;padding:0;}
		.warp{
			width: 600px;
			margin:0 auto;
			padding:20px 10px;
			border: 1px solid red;
			overflow: hidden;

			}
		.warp ul{
			float: left;
			width: 200px;
			list-style: none;
			padding:0 10px;
			box-sizing:border-box;
			/*代表此元素的内边距和边框不会增加它的宽度*/

		}
		.warp ul li{
			background: red;
			margin-bottom: 20px;
			font-size: 20px;
			border: 1px solid;
		}






	</style>
</head>
<body>
	<div class="warp" id="warp">
		<ul></ul>
		<ul></ul>
		<ul></ul>
	</div>
	<script type="text/javascript">
		var warp=document.getElementById('warp');
		var list=document.getElementsByTagName('ul');


		//随机函数（用于设定单个元素高度）
		function randFn(min,max)
		{
			var rand=parseInt(Math.random()*(max-min)+min);
			return rand;
		}
		creatLi();
		//创建li元素
		function creatLi()
		{
			for(var i=0;i<20;i++)//控制li个数
			{
				var li=document.createElement('li');//创造一个li
				var height=randFn(100,300);//单个li高度
				li.innerHTML=i;
				li.style.height=height+'px';
				var heightArr=[];//ul的高度放到这个数组里
				var minIndex=0;//设置一个最小的ul的下标值
				for(var j=0;j<list.length;j++)//把ul最小高度放入数组
				{
					heightArr.push(list[j].offsetHeight);
					var minHeight=heightArr[minIndex];
					if(minHeight>heightArr[j])
					{
						minHeight=heightArr[j];
						minIndex=j;

					}
					else
					{

					}

					
				}
				list[minIndex].appendChild(li);//将li优先插入高度最小的ul中，目的在于平衡每个ul
				console.log(minIndex);
			}

		}
		//滚动事件
		// window.onscroll=function()
		// {
		// 	var moveHeight=document.body.scrollTop||document.documentElement.scrollTop;
		// 	var sHeight=document.documentElement.clientHeight;
		// 	var H=moveHeight+sHeight;
		// 	if(H>=document.body.scrollHeight)
		// 	{
		// 		creatLi();
		// 	}
		// }
		window.onscroll=function()
		{
			var windowHeight=document.documentElement.clientHeight;//获取可视区高度（浏览器）
			var bodyHeight=document.documentElement.offsetHeight;//内容高度
			var scrollHeight=bodyHeight-windowHeight;//滚动最大高度（超出的可视区的内容高度）
			var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;//获取滚动条高度
			if(scrollTop>=scrollHeight-300)
			{
				creatLi();
			}

		}



	</script>
	
</body>
</html>